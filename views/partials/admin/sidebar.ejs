<link rel="stylesheet" href="../../../styles/partials/admin/sidebar.css">

<!-- Sidebar -->
<div class="sidebar">
    <div class="logo">Veltron</div>

    <a href="/admin/dashboard" class="nav-item <%= activePage === 'dashboard' ? 'active' : '' %>">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
    </a>

    <a href="/admin/products" class="nav-item <%= activePage === 'products' ? 'active' : '' %>">
        <i class="fas fa-box"></i>
        <span>Products</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/orders" class="nav-item <%= activePage === 'orders' ? 'active' : '' %>">
        <i class="fas fa-clipboard-list"></i>
        <span>Order List</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/customers" class="nav-item <%= activePage === 'customers' ? 'active' : '' %>">
        <i class="fas fa-users"></i>
        <span>Customer</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/sales" class="nav-item <%= activePage === 'sales' ? 'active' : '' %>">
        <i class="fas fa-chart-line"></i>
        <span>Sales</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/category" class="nav-item <%= activePage === 'category' ? 'active' : '' %>">
        <i class="fas fa-tags"></i>
        <span>Category</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/coupons" class="nav-item <%= activePage === 'coupons' ? 'active' : '' %>">
        <i class="fas fa-ticket-alt"></i>
        <span>Coupons</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/banner" class="nav-item <%= activePage === 'banner' ? 'active' : '' %>">
        <i class="fas fa-image"></i>
        <span>Banner</span>
        <span class="arrow">›</span>
    </a>

    <a href="/admin/vendors" class="nav-item <%= activePage === 'vendors' ? 'active' : '' %>">
        <i class="fas fa-store"></i>
        <span>Vendors</span>
        <span class="arrow">›</span>
    </a>

    <div class="account-controls">
        <a href="/admin/account" class="account-btn">Account</a>
        <a href="/admin/logout" class="account-btn logout-btn">Logout</a>
    </div>
</div>
<script>
    document.querySelector('.logout-btn').addEventListener('click', function (e) {
        e.preventDefault(); // stop direct link navigation

        Swal.fire({
            title: 'Are you sure?',
            text: "You will be logged out of your account.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, logout',
            cancelButtonText: 'Cancel'
        }).then(async (result) => {
            if (result.isConfirmed) {
                try {
                    const response = await axios.post('/admin/logout');

                    if (response.data.success) {
                        Swal.fire({
                            title: 'Logged Out!',
                            text: 'You have been logged out successfully.',
                            icon: 'success',
                            timer: 1500,
                            showConfirmButton: false
                        }).then(() => {
                            window.location.replace('/admin/login'); // redirect to login page
                        });
                    } else {
                        Swal.fire("Oops!", response.data.message || "Logout failed.", "error");
                    }
                } catch (error) {
                    console.error("Logout failed:", error);
                    const errMsg = error.response?.data?.message || "Something went wrong. Please try again.";
                    Swal.fire("Error", errMsg, "error");
                }
            }
        });
    });
</script>